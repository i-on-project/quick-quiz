(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{109:function(e,t,n){},110:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(90),i=n.n(s),r=(n(109),n(110),n(3)),o=function(e,t,n,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"POST",s=arguments.length>5?arguments[5]:void 0;fetch(e,{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).then((function(e){n&&n(e)})).catch((function(e){if(a){var t=JSON.parse(e.message);a(t||e.message)}})).finally((function(){void 0!==s&&null!==s&&s(!1)}))},l=function(e,t,n,a){fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("This is an HTTP error: The status is ".concat(e.status));return e.json()})).then((function(e){t&&t(e),console.log("I'm in fetch data")})).catch((function(e){n&&n(e.message),console.log("I'm in fetch error in catch ".concat(e.message))})).finally((function(){void 0!==a&&null!==a&&a(!1)}))},u=function(e,t,n,a){fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("This is an HTTP error: The status is ".concat(e.status));return e.json()})).then((function(e){t&&t(e)})).catch((function(e){n&&n(e.message)})).finally((function(){void 0!==a&&null!==a&&a(!1)}))},j=n(154),d=n(155),b=n(162),O=n(25),h=n(7),f=n(2),m=n(0),p=function(){},x={userName:null,displayName:null,isLoading:!1,inSession:null,updateUser:p},g=c.a.createContext(x),v=function(e){var t=e.children,n=Object(a.useState)(x),c=Object(r.a)(n,2),s=c[0],i=c[1],o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i((function(t){return Object(f.a)(Object(f.a)({},t),e)}))},l=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var c=n[a];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(t))return c.substring(t.length,c.length)}return null};return Object(a.useEffect)((function(){if(null===x.userName){o({isLoading:!0});!function(){var e=l("InSession");console.log("Answer Cookie: ".concat(e)),null!==e&&o({inSession:e})}(),u("/api/web/v1.0/auth/checkuser",(function(e){null!==e&&o({userName:e.properties.userName,displayName:e.properties.displayName,isLoading:!1})}),(function(e){o({isLoading:!1})}))}}),[x.userName]),Object(a.useEffect)((function(){s.updateUser===p&&o({updateUser:function(e,t){return o({userName:e,displayName:t})}})}),[s.updateUser]),Object(m.jsx)(g.Provider,{value:s,children:t})},S=function(){var e=Object(O.c)(),t=Object(r.a)(e,1)[0],n=Object(a.useState)(null),c=Object(r.a)(n,2),s=c[0],i=c[1],l=Object(a.useState)(null),u=Object(r.a)(l,2),f=u[0],p=u[1],x=Object(a.useContext)(g),v={userName:null,displayName:null,token:null};return Object(a.useEffect)((function(){if(v.userName=t.get("user"),v.token=t.get("token"),!s){console.log("useEffect 2: ".concat(v.userName));var e={userName:v.userName,loginToken:v.token};o("/api/web/v1.0/non_auth/logmein",e,i,p)}}),[v.userName,v.token,s]),Object(a.useEffect)((function(){s&&(v.displayName=s.properties.displayName,x.updateUser(v.userName,v.displayName))}),[s,x,v.userName,v.displayName]),Object(m.jsxs)("div",{children:[s&&Object(m.jsx)(h.a,{to:"/"}),f&&Object(m.jsx)(j.a,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(b.a,{children:Object(m.jsx)(b.a.Body,{children:Object(m.jsx)(b.a.Text,{children:Object(m.jsxs)("h3",{children:["The link used seems to have expired. Please request new a new ",Object(m.jsx)("a",{href:"/login",children:"Login"})," and try again."]})})})})})})]})},w=n(163),y=n(92),C=n(8),N=function(){var e=Object(a.useContext)(g),t=Object(a.useState)(null),n=Object(r.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(null),l=Object(r.a)(i,2),u=l[0],O=l[1],f=Object(a.useState)(!1),p=Object(r.a)(f,2),x=p[0],v=p[1];return Object(a.useEffect)((function(){console.log("How is context?"),console.log(e.userName),console.log(e.displayName)}),[]),Object(m.jsxs)(a.Fragment,{children:[x&&Object(m.jsx)(h.a,{to:"insession/".concat(u.participantId)}),Object(m.jsx)(j.a,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(b.a,{children:Object(m.jsxs)(b.a.Body,{children:[Object(m.jsx)(b.a.Title,{children:"Join a Quiz Session"}),Object(m.jsxs)(w.a,{className:"mb-3",children:[Object(m.jsx)(w.a.Text,{id:"sessioncode"}),Object(m.jsx)(y.a,{placeholder:"Session Code","aria-label":"Session","aria-describedby":"basic-addon1",onChange:function(e){O(e.target.value)}})]}),Object(m.jsx)(C.a,{className:"btn btn-success",type:"submit",onClick:function(){o("/api/web/v1.0/non_auth/join_session",{sessionCode:u},(function(e){O(e),console.log(e),v(!0)}),s)},children:" Save"}),c&&Object(m.jsx)("div",{children:"There is a problem joining the session - ".concat(c)})]})})})})]})},T=function(){var e=Object(a.useState)(null),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(r.a)(s,2),l=i[0],u=i[1],O=Object(a.useState)(null),h=Object(r.a)(O,2),f=h[0],p=h[1],x=Object(a.useState)(null),g=Object(r.a)(x,2),v=g[0],S=g[1],N=function(e){e.properties.host=window.location.host,c(e)};return Object(m.jsx)("div",{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(b.a,{children:Object(m.jsxs)(b.a.Body,{children:[Object(m.jsx)(b.a.Title,{children:"Quick Quiz Register Test"}),Object(m.jsxs)(w.a,{className:"mb-3",children:[Object(m.jsx)(w.a.Text,{id:"username"}),Object(m.jsx)(y.a,{placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1",onChange:function(e){p(e.target.value)}})]}),Object(m.jsxs)(w.a,{className:"mb-3",children:[Object(m.jsx)(w.a.Text,{id:"displayname"}),Object(m.jsx)(y.a,{placeholder:"Display Name","aria-label":"Display Name","aria-describedby":"basic-addon1",onChange:function(e){S(e.target.value)}})]}),Object(m.jsx)(C.a,{className:"btn btn-success",type:"submit",onClick:function(){var e={userName:f,displayName:v};console.log(e),o("/api/web/v1.0/non_auth/register",e,N,u)},children:" Save"}),Object(m.jsx)(b.a,{children:Object(m.jsxs)(b.a.Body,{children:[l&&Object(m.jsx)("div",{children:"There is a problem fetching the post data - ".concat(l)}),n&&Object(m.jsx)("div",{children:n.userName}),n&&Object(m.jsx)("a",{href:"http://".concat(n.properties.host,"/logmein?user=").concat(n.properties.userName,"&token=").concat(n.properties.token),children:" LogMeIn "})]})})]})})})})})},E=function(){var e=Object(a.useState)(null),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(r.a)(s,2),l=i[0],u=i[1],O=Object(a.useState)(null),h=Object(r.a)(O,2),f=h[0],p=h[1],x=function(e){e.properties.host=window.location.host,c(e)};return Object(m.jsx)("div",{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(d.a,{children:Object(m.jsx)(b.a,{children:Object(m.jsxs)(b.a.Body,{children:[Object(m.jsx)(b.a.Title,{children:"Login"}),Object(m.jsxs)(w.a,{className:"mb-3",children:[Object(m.jsx)(w.a.Text,{id:"username"}),Object(m.jsx)(y.a,{placeholder:"Username","aria-label":"Username","aria-describedby":"basic-addon1",onChange:function(e){p(e.target.value)}})]}),Object(m.jsx)(C.a,{className:"btn btn-success",type:"submit",onClick:function(){var e={userName:f};console.log(e),o("/api/web/v1.0/non_auth/login",e,x,u)},children:" Save"})]})})}),Object(m.jsx)(d.a,{children:n||l?Object(m.jsx)(b.a,{children:Object(m.jsxs)(b.a.Body,{children:[l&&Object(m.jsx)("div",{children:"There is a problem fetching the post data - ".concat(l)}),n&&Object(m.jsx)("div",{children:n.properties.userName}),n&&Object(m.jsx)("div",{children:n.properties.token}),n&&Object(m.jsx)("a",{href:"http://".concat(n.properties.host,"/logmein?user=").concat(n.properties.userName,"&token=").concat(n.properties.token),children:" LogMeIn "})]})}):Object(m.jsx)("div",{})})]})})},z=n(158),A=function(){var e=Object(a.useContext)(g),t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=n[0],s=n[1],i=function(){return null!==e.userName&&!1===e.isLoading},l=function(){return null===e.userName&&!1===e.isLoading};return Object(m.jsxs)(a.Fragment,{children:[c&&Object(m.jsx)(h.a,{to:"/"}),Object(m.jsx)(z.a,{bg:"light",expand:"lg",children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(z.a.Text,{children:Object(m.jsx)(O.b,{to:"/",children:"Home"})}),i()?Object(m.jsx)(z.a.Brand,{href:"/sessions",children:"Sessions"}):null,i()?Object(m.jsx)(z.a.Brand,{href:"/templates",children:"Templates"}):null,i()?Object(m.jsx)(z.a.Brand,{href:"/history",children:"History"}):null,i()?Object(m.jsxs)(z.a.Text,{children:["Welcome ",e.displayName]}):null,i()?Object(m.jsx)(C.a,{className:"btn btn-success",type:"submit",onClick:function(){o("/api/web/v1.0/auth/logout",null,null,null),e.updateUser(null,null),s(!0)},children:" Logout"}):null,l()?Object(m.jsx)(z.a.Brand,{href:"/register",children:"Register"}):null,l()?Object(m.jsx)(z.a.Brand,{href:"/login",children:"Login"}):null]})}),null!==e.inSession&&Object(m.jsx)(h.a,{to:"/insession/".concat(e.inSession)})]})},L=void 0,I=function(){var e=Object(a.useState)("Test"),t=Object(r.a)(e,2),n=t[0];t[1];return Object(m.jsx)("div",{children:Object(m.jsxs)("form",{onSubmit:function(e){alert("A name was submitted: "+n),e.preventDefault()},children:[Object(m.jsxs)("label",{children:["Name:",Object(m.jsx)("input",{type:"text",value:n,onChange:function(e){L.setState(e.target.value)}})]}),Object(m.jsx)("input",{type:"submit",value:"Submit"})]})})},k=function(){return Object(m.jsx)("div",{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)("h1",{children:"Form Should be below"}),Object(m.jsx)(I,{})]})})},D=n(10),R=n(156),q=n(160),P=n(159),Q=function(e){var t=Object(a.useState)(e.status),n=Object(r.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(!1),l=Object(r.a)(i,2),u=l[0],j=l[1];return Object(m.jsxs)(a.Fragment,{children:[u&&Object(m.jsx)(h.a,{to:"/owninsession/".concat(e.id)}),Object(m.jsx)(b.a,{style:{width:"18rem"},className:"me-3 mb-3",children:Object(m.jsxs)(b.a.Body,{children:[Object(m.jsx)(b.a.Title,{children:e.name}),Object(m.jsxs)(P.a.Select,{value:c,onChange:function(t){return function(t){s(t);var n=function(e){console.log(e),"LiveSessionAlreadyExists"===e.type?(alert("Another Session is already Live. Please close that session before starting a new one."),s("NOT_STARTED")):alert("An error occurred. PLease try again and if the error persists contact your administrator.")},a=function(n){console.log("status Updated to ".concat(t,", response: ").concat(n," -> Navigate somewhere")),"STARTED"===t?j(!0):e.reloadSessions()};"STARTED"===t?o(e.startHref,"",a,n):"CLOSED"===t&&o(e.closeHref,"",a,n)}(t.target.value)},children:["NOT_STARTED"===c&&Object(m.jsx)("option",{value:"NOT_STARTED",children:"Not Started"}),"CLOSED"!==c&&Object(m.jsx)("option",{value:"STARTED",children:"Started"}),"NOT_STARTED"!==c&&Object(m.jsx)("option",{value:"CLOSED",children:"Closed"})]}),Object(m.jsx)(C.a,{variant:"primary",onClick:function(){"STARTED"!==c?e.openSession(e.name,e.link):j(!0)},className:"mt-3",children:"Open"}),"STARTED"!==c&&Object(m.jsx)(C.a,{variant:"primary",onClick:function(){"STARTED"!==c&&e.deleteSession(e.name,e.link)},className:"ms-3 mt-3",children:"Delete"})]})})]})},_={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},H=function(e,t){return navigator.geolocation.getCurrentPosition(e,t,_)},U=function(e){var t=function(){return void 0!==e.session&&null!==e.session},n=Object(a.useState)(t()?e.session.name:""),c=Object(r.a)(n,2),s=c[0],i=c[1],o=Object(a.useState)(t()?e.session.status:""),l=Object(r.a)(o,2),u=l[0],j=l[1],d=Object(a.useState)(t()?e.session.description:""),b=Object(r.a)(d,2),O=b[0],h=b[1],f=Object(a.useState)(t()?e.session.creationDate:""),p=Object(r.a)(f,1)[0],x=Object(a.useState)(t()?e.session.limitOfParticipants:""),g=Object(r.a)(x,2),v=g[0],S=g[1],N=Object(a.useState)(t()?e.session.geolocation:""),T=Object(r.a)(N,2),E=T[0],z=T[1],A=Object(a.useState)(t()&&e.session.radius>50?e.session.radius:50),L=Object(r.a)(A,2),I=L[0],k=L[1],D=Object(a.useState)(!1),R=Object(r.a)(D,2),q=R[0],Q=R[1],_=Object(a.useState)(!1),U=Object(r.a)(_,2),F=U[0],M=U[1],B=Object(a.useState)(!1),G=Object(r.a)(B,2),V=G[0],J=G[1];Object(a.useEffect)((function(){null===e.updateSession||void 0===e.updateSession?(Q(!0),M(!0)):M(!1)}),[e]);return Object(m.jsxs)(P.a,{noValidate:!0,validated:V,onSubmit:function(t){var n=t.currentTarget;t.preventDefault(),J(!0),!1===n.checkValidity()?t.stopPropagation():(!function(){var t={name:s,description:O,limitOfParticipants:v,geolocation:E,radius:I};void 0!==e.updateSession&&null!==e.updateSession?e.updateSession(t):e.createSession(t)}(),Q(!1),J(!1))},children:[!F&&Object(m.jsx)("div",{children:Object(m.jsxs)(P.a.Label,{children:["Created on ",function(){var e=new Date(0);return e.setSeconds(p),e.getDate().toLocaleString()}()]})}),Object(m.jsx)(P.a.Label,{className:"mb-2 mt-3",children:"Session Name:"}),Object(m.jsx)(w.a,{children:Object(m.jsx)(y.a,{required:!0,placeholder:"Session Name","aria-label":"Session Name","aria-describedby":"session_name",disabled:!q,value:s,onChange:function(e){return i(e.target.value)}})}),Object(m.jsx)(P.a.Label,{className:"mb-2 mt-3",children:"Session Description:"}),Object(m.jsx)(w.a,{children:Object(m.jsx)(y.a,{placeholder:"Session description","aria-label":"Session description","aria-describedby":"session_description",disabled:!q,value:O,onChange:function(e){return h(e.target.value)}})}),Object(m.jsx)(P.a.Label,{className:"mb-2 mt-3",children:"Session Status:"}),Object(m.jsxs)(P.a.Select,{value:u,onChange:function(e){return j(e.target.value)},disabled:!q,children:[Object(m.jsx)("option",{value:"NOT_STARTED",children:"Not Started"}),Object(m.jsx)("option",{value:"STARTED",children:"Started"}),Object(m.jsx)("option",{value:"CLOSED",children:"Closed"})]}),Object(m.jsx)(P.a.Label,{className:"mb-2 mt-3",children:"Limit Of Participants:"}),Object(m.jsx)(w.a,{children:Object(m.jsx)(y.a,{required:!0,min:10,placeholder:"Limit Of Participants",type:"number","aria-label":"Limit Of Participants:","aria-describedby":"limit_participants",disabled:!q,value:v,onChange:function(e){return S(e.target.value)}})}),Object(m.jsx)(P.a.Label,{className:"mb-2 mt-3",children:"Geolocation:"}),Object(m.jsxs)(w.a,{className:"mb-3",children:[Object(m.jsx)(y.a,{type:"text",placeholder:"Add Geolocation (optional)",value:E,disabled:!q,onChange:function(e){return z(e.target.value)}},"geo_location"),q&&Object(m.jsx)(C.a,{variant:"outline-secondary",id:"button-addon2",onClick:function(){H((function(e){var t=e.coords;console.log("Your current position is:"),console.log("Latitude : ".concat(t.latitude)),console.log("Longitude: ".concat(t.longitude)),console.log("More or less ".concat(t.accuracy," meters.")),z("".concat(t.latitude,",").concat(t.longitude,",").concat(t.accuracy))}),(function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))}))},children:"Update location"})]}),null!==E&&""!==E&&Object(m.jsx)(P.a.Label,{className:"mb-2 mt-3",children:"Radius (meters):"}),null!==E&&""!==E&&Object(m.jsx)(w.a,{className:"mb-3",children:Object(m.jsx)(y.a,{required:null!==E&&""!==E,min:50,type:"number",placeholder:"Add Radius (min 50m)",value:I,disabled:!q,onChange:function(e){return k(e.target.value)}},"geo_radius")}),!q&&!F&&Object(m.jsx)(C.a,{className:"btn btn-success left",onClick:function(){return Q(!0)},children:" Edit"}),q&&!F&&Object(m.jsx)(C.a,{className:"btn btn-success me-3",onClick:function(){return Q(!1)},children:" Cancel"}),q&&!F&&Object(m.jsxs)(C.a,{className:"btn btn-success left",type:"submit",children:[" ",F?"Create":"Update"]})]})},F=function(e){var t=function(){return void 0!==e.session&&null!==e.session},n=Object(a.useState)(t()?e.session.name:""),c=Object(r.a)(n,2),s=c[0],i=c[1],o=Object(a.useState)(t()?e.session.description:""),l=Object(r.a)(o,2),u=l[0],j=l[1],d=Object(a.useState)(t()?e.session.limitOfParticipants:""),b=Object(r.a)(d,2),O=b[0],h=b[1],f=Object(a.useState)(t()?e.session.geolocation:""),p=Object(r.a)(f,2),x=p[0],g=p[1],v=Object(a.useState)(t()?e.session.radius:""),S=Object(r.a)(v,2),N=S[0],T=S[1],E=Object(a.useState)(!1),z=Object(r.a)(E,2),A=(z[0],z[1],Object(a.useState)(!1)),L=Object(r.a)(A,2),I=L[0],k=L[1],D=function(){null!=e.handleClose&&e.handleClose()};return Object(m.jsx)(a.Fragment,{children:Object(m.jsxs)(P.a,{noValidate:!0,validated:I,onSubmit:function(t){var n=t.currentTarget;if(t.preventDefault(),!1===n.checkValidity())t.stopPropagation();else{var a={name:s,description:u,limitOfParticipants:O,geolocation:x,radius:N};null!=e.createSession&&e.createSession(a)}k(!0)},children:[Object(m.jsx)(q.a.Header,{closeButton:!0,onClick:D,children:Object(m.jsx)(q.a.Title,{children:"Quiz Session"})}),Object(m.jsxs)(q.a.Body,{children:[Object(m.jsx)(P.a.Label,{children:"Session Name:"}),Object(m.jsx)(w.a,{children:Object(m.jsx)(y.a,{required:!0,placeholder:"Session Name","aria-label":"Session Name","aria-describedby":"session_name",value:s,onChange:function(e){return i(e.target.value)}})}),Object(m.jsx)(P.a.Label,{children:"Session Description:"}),Object(m.jsx)(w.a,{children:Object(m.jsx)(y.a,{required:!0,placeholder:"Session description","aria-label":"Session description","aria-describedby":"session_description",value:u,onChange:function(e){return j(e.target.value)}})}),Object(m.jsx)(P.a.Label,{children:"Limit Of Participants:"}),Object(m.jsx)(w.a,{children:Object(m.jsx)(y.a,{placeholder:"Limit Of Participants",type:"number","aria-label":"Limit Of Participants:","aria-describedby":"limit_participants",defaultValue:"10",value:O,onChange:function(e){return h(e.target.value)}})}),Object(m.jsx)(P.a.Label,{className:"mb-2 mt-3",children:"Geolocation:"}),Object(m.jsxs)(w.a,{className:"mb-3",children:[Object(m.jsx)(y.a,{type:"text",placeholder:"Add Geolocation (optional)",value:x,onChange:function(e){return g(e.target.value)}},"geo_location"),Object(m.jsx)(C.a,{variant:"outline-secondary",id:"button-addon2",onClick:function(){H((function(e){var t=e.coords;g("".concat(t.latitude,",").concat(t.longitude,",").concat(t.accuracy))}),(function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))}))},children:"Update location"})]}),null!==x&&""!==x&&Object(m.jsx)(P.a.Label,{className:"mb-2 mt-3",children:"Radius (meters):"}),null!==x&&""!==x&&Object(m.jsx)(w.a,{className:"mb-3",children:Object(m.jsx)(y.a,{required:null!==x&&""!==x,min:50,type:"number",placeholder:"Add Radius (min 50m)",value:N,onChange:function(e){return T(e.target.value)}},"geo_radius")})]}),Object(m.jsxs)(q.a.Footer,{children:[Object(m.jsx)(C.a,{variant:"secondary",onClick:D,children:"Close"}),Object(m.jsx)(C.a,{variant:"primary",type:"submit",children:"Save changes"})]})]})})},M=function(e,t){var n=e.find((function(e){return e.name===t}));return n?n.href:null},B=function(e,t,n){var a=e.find((function(e){return e.rel.includes(t)&&e.title===n}));return a?a.href:null},G=function(e,t){var n=e.links.find((function(e){return e.rel.includes("self")&&e.rel.includes(t)}));return n?n.href:null},V=function(){var e=Object(a.useState)(null),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(r.a)(s,2),b=i[0],O=i[1],f=Object(a.useState)(!1),p=Object(r.a)(f,2),x=p[0],g=p[1],v=Object(a.useState)(!1),S=Object(r.a)(v,2),w=S[0],y=S[1],N=Object(a.useState)(!1),T=Object(r.a)(N,2),E=T[0],z=T[1],A=Object(a.useState)(0),L=Object(r.a)(A,2),I=L[0],k=L[1],P=Object(a.useState)(-1),_=Object(r.a)(P,2),H=_[0],U=_[1],B=Object(a.useState)(null),V=Object(r.a)(B,2),J=V[0],W=V[1],Y=function(){u("/api/web/v1.0/auth/sessions?page=".concat(-1===I?0:I),(function(e){c(e);var t=Math.floor(e.properties.total/10);U(0===t?1:t)}),(function(e){alert("Failed to update Session from ".concat("/api/web/v1.0/auth/sessions?page=".concat(-1===I?0:I)," with error ",e))}),g)};Object(a.useEffect)((function(){g(!0),Y()}),[I]);var Z=function(e){g(!0);console.log(n.entities);var t=function(e,t,n){var a=e.find((function(e){return e.properties.id===t}));return a?G(a,n):null}(n.entities,e,"delete");null!==t&&l(t,(function(e){console.log(e),Y()}),(function(e){null!==e&&alert("Session was not Deleted and Error received: "+e)}),g)},K=function(){return z(!1)};return Object(m.jsxs)(a.Fragment,{children:[null!==b&&Object(m.jsx)(h.a,{to:"./".concat(b),session:J}),Object(m.jsxs)(j.a,{children:[Object(m.jsx)(d.a,{children:Object(m.jsx)("h1",{children:"Sessions"})}),!1===x&&!1===w&&function(){var e;return Object(m.jsx)(C.a,(e={className:"btn btn-success",type:"submit"},Object(D.a)(e,"className","mb-3"),Object(D.a)(e,"onClick",(function(){return z(!0)})),Object(D.a)(e,"children"," New Session"),e))}()]}),Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(d.a,{children:[!0===x&&Object(m.jsx)(R.a,{animation:"grow"}),!1===x&&!1===w&&null!==n&&n.entities.map((function(e){return Object(m.jsx)(Q,{name:e.properties.name,link:e.href,id:e.properties.id,status:e.properties.status,startHref:G(e,"start"),closeHref:G(e,"close"),openSession:function(){return t=e.properties.id,y(!0),void O(t);var t},deleteSession:function(){return Z(e.properties.id)},reloadSessions:function(){return Y()}},e.properties.name)})),!1===x&&!0===w&&!0===w&&Object(m.jsx)(h.a,{to:"/sessions/".concat(b)}),!1===x&&Object(m.jsxs)(q.a,{show:E,children:[Object(m.jsx)(F,{createSession:function(e){g(!0);var t=function(e){null!==e&&alert("Session was not created and Error received: "+e)},a=M(n.actions,"Create-Session");null!==a?o(a,e,(function(e){K(),console.log(e),W(e.properties),O(e.properties.id)}),t,"POST",g):(t("Missing Action!"),g(!0))},handleClose:K}),")"]})]}),Object(m.jsx)(d.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(C.a,{variant:"primary",onClick:function(){k(I<=0?H:function(e){return e-1})},children:"Prev"}),Object(m.jsx)(C.a,{variant:"primary",onClick:function(){k(I>=H?0:function(e){return e+1})},children:"Next"})]})})]})]})},J=n(161),W=n(28);function Y(e,t){switch(t.type){case"set":return e.data.rightAnswer=t.payload.rightAnswer,t.payload.rightAnswer;case"increment":return e.data.rightAnswer+=1;case"decrement":return e.data.rightAnswer-=1;default:throw new Error}}var Z=function(e){var t=function(){return void 0!==e.data&&null!==e.data},n=function(){return t()&&void 0!==e.data.answerChoices&&null!==e.data.answerChoices&&"MULTIPLE_CHOICE"===e.data.answerType},c=Object(a.useState)(t()?e.data.answerType:"SHORT"),s=Object(r.a)(c,2),i=s[0],o=s[1],l=Object(a.useState)(t()?e.data.question:""),u=Object(r.a)(l,2),j=u[0],d=u[1],b=Object(a.useState)(n()?Object(W.a)(e.data.answerChoices):[{choiceAnswer:""},{choiceAnswer:""}]),O=Object(r.a)(b,2),h=O[0],p=O[1],x=Object(a.useState)(!1),g=Object(r.a)(x,2),v=g[0],S=g[1],N=Object(a.useState)(t()?e.data.order:0),T=Object(r.a)(N,2),E=T[0],z=T[1],A=Object(a.useState)(-1),L=Object(r.a)(A,2),I=L[0],k=L[1],D=Object(a.useReducer)(Y,{loading:!1,data:{rightAnswer:0},error:void 0}),R=Object(r.a)(D,2),Q=(R[0],R[1],function(){return e.handleClose()});Object(a.useEffect)((function(){n()&&k(e.data.answerChoices.find((function(e){return!0===e.choiceRight})).choiceNumber)}),[e.data]);var _=function(e){return"MULTIPLE_CHOICE"!==i?null:h.map((function(t,n){return Object(f.a)(Object(f.a)({},t),{},{choiceNumber:n,choiceRight:n===e})}))};return Object(m.jsx)(a.Fragment,{children:Object(m.jsxs)(P.a,{noValidate:!0,validated:v,onSubmit:function(n){if(!1===n.currentTarget.checkValidity())n.stopPropagation();else{var a=function(){var e=_(I);return t()?{question:j,order:E,choices:e}:{question:j,questionType:i,order:E,choices:e}}();t()?e.updateQuiz(e.data.id,a):e.createQuiz(a)}n.preventDefault(),S(!0)},children:[Object(m.jsx)(q.a.Header,{closeButton:!0,onClick:Q,children:Object(m.jsx)(q.a.Title,{children:"QUIZ"})}),Object(m.jsxs)(q.a.Body,{children:[Object(m.jsxs)(P.a.Group,{className:"mb-3",children:[Object(m.jsx)(P.a.Label,{children:"Answer Type:"}),Object(m.jsxs)(P.a.Select,{value:i,onChange:function(e){o(e.target.value)},disabled:t(),children:[Object(m.jsx)("option",{value:"SHORT",children:"Short"}),Object(m.jsx)("option",{value:"LONG",children:"Long"}),Object(m.jsx)("option",{value:"MULTIPLE_CHOICE",children:"Multi-Choice"})]}),Object(m.jsx)(P.a.Label,{children:"Order in session:"}),Object(m.jsx)(w.a,{children:Object(m.jsx)(y.a,{placeholder:"Order Number?","aria-label":"Order in session","aria-describedby":"order",type:"number",value:E,onChange:function(e){return z(e.target.value)}},"order_number")}),Object(m.jsx)(P.a.Label,{children:"Question:"}),Object(m.jsx)(w.a,{children:Object(m.jsx)(y.a,{placeholder:"Question?","aria-label":"A Question","aria-describedby":"question",value:j,onChange:function(e){d(e.target.value)}},"question_input")}),"MULTIPLE_CHOICE"===i&&Object(m.jsx)(P.a.Label,{children:"Possible Answers:"}),"MULTIPLE_CHOICE"===i&&h.map((function(e,t){return Object(m.jsxs)(w.a,{className:"mb-3",children:[Object(m.jsx)(y.a,{required:!0,type:"text",placeholder:"Possible answer",value:e.choiceAnswer,onChange:function(e){return function(e,t){var n=h.map((function(n,a){return a===t?{choiceAnswer:e.target.value}:n}));p(Object(W.a)(n))}(e,t)}},"q_"+t),Object(m.jsx)(w.a.Radio,{name:"correct",checked:e.choiceRight,onChange:function(){return function(e){k(e);var t=_(e);p(Object(W.a)(t))}(t)}}),h.length>2&&Object(m.jsx)(C.a,{variant:"outline-secondary",id:"button-addon2",onClick:function(){return function(e){if(e!==I){var t=[];I>e?(k((function(e){return e-1})),t=_(I)):t=Object(W.a)(h),console.log(t),t.splice(e,1),p(Object(W.a)(t))}else alert("This answer cannot be removed because its configured as the right answer!")}(t)},children:"Remove"})]})}))]}),"MULTIPLE_CHOICE"===i&&Object(m.jsx)(C.a,{variant:"primary",onClick:function(){p([].concat(Object(W.a)(h),[{choiceAnswer:""}]))},children:"Add"})]}),Object(m.jsxs)(q.a.Footer,{children:[Object(m.jsx)(C.a,{variant:"secondary",onClick:Q,children:"Close"}),Object(m.jsx)(C.a,{variant:"primary",type:"submit",children:"Save"})]})]})})},K=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(null),u=Object(r.a)(i,2),j=u[0],d=u[1],b=Object(a.useState)(e.data.quizState),O=Object(r.a)(b,2),h=O[0],f=O[1],p=Object(a.useState)(!1),x=Object(r.a)(p,2),g=(x[0],x[1],function(){console.log("Data in Quiz Card: ".concat(e.data)),d(e.data),s(!0)}),v=function(){s(!1),d(null)},S=function(t){console.log("Quiz Self: ".concat(e.quizHref)),l(e.quizHref,(function(n){console.log("Deleted Quiz ".concat(t," Successfully!! Response: ").concat(n)),e.reloadQuizzes()}),(function(e){console.log("Error Deleting Quiz: ".concat(t," with error ").concat(e," "))}))};return Object(m.jsxs)(a.Fragment,{children:[Object(m.jsxs)(J.a,{horizontal:!0,children:[Object(m.jsx)(J.a.Item,{className:"col-4",children:e.data.question}),Object(m.jsx)(J.a.Item,{className:"col-3",children:e.data.answerType}),Object(m.jsx)(J.a.Item,{className:"col-1",children:e.data.order}),Object(m.jsx)(J.a.Item,{className:"col-2",children:Object(m.jsxs)(P.a.Select,{value:h,onChange:function(t){return function(t){var n={quizState:t};o("".concat(e.quizHref,"/updatestatus"),n,(function(n){null!==n&&(console.log("Updated Quiz ".concat(e.data.id," Successfully!! Response: ").concat(n)),f(t))}),(function(t){null!==t&&console.log("Error Updating Quiz: ".concat(e.data.id," with error ").concat(t," "))}),"PUT")}(t.target.value)},children:[Object(m.jsx)("option",{value:"NOT_STARTED",children:"Not Started"}),Object(m.jsx)("option",{value:"STARTED",children:"Started"}),Object(m.jsx)("option",{value:"CLOSED",children:"Closed"})]})}),"NOT_STARTED"===h&&Object(m.jsx)(J.a.Item,{children:Object(m.jsx)(C.a,{variant:"primary",onClick:g,children:"Edit"})}),"NOT_STARTED"===h&&Object(m.jsx)(J.a.Item,{children:Object(m.jsx)(C.a,{variant:"primary",type:"submit",onClick:function(){return S(e.data.id)},children:"Remove"})}),"NOT_STARTED"!==h&&Object(m.jsx)(J.a.Item,{children:Object(m.jsx)(C.a,{variant:"primary",type:"submit",onClick:function(){return S(e.data.id)},children:"Answers"})})]}),Object(m.jsx)(q.a,{show:c,children:Object(m.jsx)(Z,{data:j,handleClose:v,handleModalChanges:g,updateQuiz:function(t,n){o(e.quizHref,n,(function(t){v(),e.reloadQuizzes()}),(function(e){return null!==e?console.log("Error Updating Quiz: ".concat(t," with error ").concat(e," ")):null}),"PUT")}})})]})},X=(n(99),function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=(n[0],n[1]),s=Object(a.useState)(null),i=Object(r.a)(s,2),l=i[0],O=i[1],f=Object(a.useState)(null),p=Object(r.a)(f,2),x=p[0],g=p[1],v=Object(a.useState)(null),S=Object(r.a)(v,2),w=(S[0],S[1],Object(a.useState)(!1)),y=Object(r.a)(w,2),N=y[0],T=y[1],E=Object(a.useState)(null),z=Object(r.a)(E,2),A=(z[0],z[1]),L=Object(a.useState)(""),I=Object(r.a)(L,2),k=I[0],D=I[1],R=Object(h.h)().id;Object(a.useEffect)((function(){u("/api/web/v1.0/auth/sessions/".concat(R),(function(e){O(e)}),(function(e){null!==e&&(console.log("Failed to get session with ID: ".concat(R," with error ").concat(e)),A(e))}))}),[R]),Object(a.useEffect)((function(){null!==l&&(D(l.properties.name),P())}),[l]);var P=function(){u(B(l.links,"related","Quizzes"),(function(e){if(e){var t=e.entities.map((function(e){return e})).sort((function(e,t){return function(e,t){return e<t?-1:e>t?1:0}(e.properties.order,t.properties.order)}));g(t)}}),(function(e){null!==e&&alert("Failed to retrieve Session from ".concat(B(l.links,"related")," with error ").concat(e))}))},Q=function(){T(!0)},_=function(){T(!1)};return Object(m.jsxs)(a.Fragment,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(b.a,{children:Object(m.jsxs)(b.a.Body,{children:[Object(m.jsx)(b.a.Title,{children:k}),null!==l&&Object(m.jsx)(U,{session:l.properties,updateSession:function(e){c(!0);var t=M(l.actions,"Update-Session");o(t,e,null,(function(t){null!==t&&alert("Failed to update Session from ".concat(e," with error ").concat(t))}),"PUT",c)}})]})})})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(d.a,{children:null!==x&&x.length>0&&x.map((function(e){return Object(m.jsx)(K,{name:e.properties.question,data:e.properties,quizHref:e.href,reloadQuizzes:P},e.properties.id)}))})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(C.a,{className:"btn btn-success left",type:"submit",onClick:Q,children:" Add Quiz"})})}),Object(m.jsx)(q.a,{show:N,children:Object(m.jsx)(Z,{handleClose:_,createQuiz:function(e){var t=l.actions.find((function(e){return"Add-Quiz"===e.name})).href;o(t,e,(function(e){console.log("Created Quiz Successfully!! Response: ".concat(e)),_(),P()}),(function(e){return null!==e?console.log("Error Creating with error ".concat(e," ")):null}))}})})]})}),$=function(e,t,n,a){var c=function(e,t){var n=new AbortController,a=n.signal;return{abort:function(){return n.abort()},ready:fetch(e,Object(f.a)(Object(f.a)({},t),{},{signal:a})),signal:a}}(e,t);return c.ready.then((function(e){!function(e,t,n){e.body.then((function(a){e.signal.aborted||(e.ok?t(a):n(a))}))}({ok:e.ok,body:e.json(),signal:c.signal},n,a)})).catch((function(e){return console.log("On catch:"+e)})),c.abort},ee=n(100),te=n(157),ne=function(e){var t=Object(m.jsx)("p",{children:"No answers"});if("MULTIPLE_CHOICE"===e.item.answerType){var n=new Array(e.item.answerChoices.length).fill(0);e.item.answers.forEach((function(e){return n[e.choiceNumber]+=1})),t=e.item.answerChoices.map((function(t,a){var c="danger";return t.choiceRight&&(c="success"),Object(m.jsx)(J.a,{variant:"flush",children:Object(m.jsxs)(J.a.Item,{children:[Object(m.jsxs)("div",{className:"bg-light d-flex justify-content-between",children:[Object(m.jsx)("p",{children:t.choiceAnswer}),Object(m.jsx)("p",{children:n[t.choiceNumber]+" of "+e.item.answers.length})]}),Object(m.jsx)(te.a,{variant:c,now:n[t.choiceNumber]/e.item.answers.length*100})]},a)})}))}return"SHORT"!==e.item.answerType&&"LONG"!==e.item.answerType||(t=Object(m.jsx)(J.a,{variant:"flush",children:e.item.answers.map((function(e,t){return Object(m.jsx)(J.a.Item,{children:e.answer},t)}))})),Object(m.jsxs)(a.Fragment,{children:[Object(m.jsxs)(b.a,{children:[Object(m.jsx)(b.a.Header,{children:"Question"}),Object(m.jsx)(b.a.Body,{children:e.item.question})]}),Object(m.jsxs)(b.a,{children:[Object(m.jsx)(b.a.Header,{children:"Answers"}),Object(m.jsx)(b.a.Body,{children:t})]})]})},ae=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=n[0],s=n[1],i=e.item.properties.historyDate-e.item.properties.liveDate,o=Math.floor(i/3600);i%=3600;var l=Math.floor(i/60),u=i%60,j=null,d=null;return null!=e.item.properties.quizzes&&0!==e.item.properties.quizzes.length&&(j=Object(m.jsx)(C.a,{onClick:function(){return s((function(e){return!e}))},"aria-controls":"collapse-quizzes","aria-expanded":c,children:"quizzes"}),d=Object(m.jsx)(ee.a,{in:c,children:Object(m.jsx)("div",{id:"collapse-quizzes",children:e.item.properties.quizzes.map((function(t){return Object(m.jsx)(ne,{item:t},e.item.fields.find((function(e){return"id"===e.name})).value)}))})})),Object(m.jsxs)(a.Fragment,{children:[Object(m.jsxs)(J.a,{horizontal:!0,children:[Object(m.jsx)(J.a.Item,{className:"col-3",children:e.item.properties.name},0),Object(m.jsx)(J.a.Item,{className:"col-6",children:e.item.properties.description},1),Object(m.jsxs)(J.a.Item,{className:"col-1",children:[e.item.properties.numberOfParticipants," of ",e.item.properties.limitOfParticipants]},2),Object(m.jsxs)(J.a.Item,{className:"col-1",children:[String(o).padStart(2,"0"),":",String(l).padStart(2,"0"),":",String(u).padStart(2,"0")]},3),j]}),d]})},ce=function(){var e=Object(a.useState)(null),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(r.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)(!1),b=Object(r.a)(u,2),O=b[0],h=b[1];Object(a.useEffect)((function(){return h(!0),function(e,t,n){return $(e,{method:"GET"},t,n)}("/api/web/v1.0/auth/history",c,l)}),[]),Object(a.useEffect)((function(){(n||o)&&h(!1)}),[n,o]);var f=Object(m.jsx)("h3",{children:"You don't have a history"});return!0===O&&(f=Object(m.jsx)(R.a,{animation:"border",role:"status",children:Object(m.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),null!==o&&(f=Object(m.jsx)("h3",{children:"An error had occured"})),null!==n&&0!==n.entities.length&&(f=n.entities.map((function(e){return Object(m.jsx)(ae,{item:e},e.fields[0].value)}))),Object(m.jsxs)(a.Fragment,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)("h1",{children:"History"})})}),Object(m.jsx)(j.a,{className:"d-flex justify-content-center",children:Object(m.jsx)(d.a,{children:f})})]})},se=n(46),ie=n.n(se),re=n(97),oe=n(101),le=function(e){var t=function(){return void 0!==e.answer},n=Object(a.useState)(!1),c=Object(r.a)(n,2),s=c[0],i=c[1],o=Object(a.useState)(t()&&void 0!==e.answer.answer?e.answer.answer:null),l=Object(r.a)(o,2),u=l[0],j=l[1],d=Object(a.useState)(t()&&void 0!==e.answer.answerNumber?e.answer.answerNumber:null),b=Object(r.a)(d,2),O=b[0],h=b[1],f=function(){return e.handleClose()};return Object(m.jsx)(a.Fragment,{children:Object(m.jsxs)(P.a,{noValidate:!0,validated:s,onSubmit:function(t){var n=t.currentTarget;if(t.preventDefault(),!1===n.checkValidity())t.stopPropagation();else{var a={sessionId:e.data.sessionId,quizId:e.data.id,answer:u,answerChoice:O};e.saveAnswer(a)}i(!0)},children:[Object(m.jsx)(q.a.Header,{closeButton:!0,onClick:f,children:Object(m.jsx)(q.a.Title,{children:e.data.question})}),Object(m.jsxs)(q.a.Body,{children:["MULTIPLE_CHOICE"===e.data.answerType&&e.data.answerChoices.map((function(e,t){return function(e,t){return Object(m.jsx)(a.Fragment,{children:Object(m.jsxs)(w.a,{className:"mb-3",children:[Object(m.jsx)(w.a.Radio,{name:"answer",checked:t===O,onChange:function(){return h(t)}}),Object(m.jsx)(oe.a,{className:"ms-3",children:e.choiceAnswer})]})})}(e,t)})),"SHORT"===e.data.answerType&&Object(m.jsx)(a.Fragment,{children:Object(m.jsx)(w.a,{className:"mb-3",children:Object(m.jsx)(y.a,{placeholder:"Write a short answer here","aria-label":"Order in session","aria-describedby":"order",type:"text",value:u,onChange:function(e){return j(e.target.value)}},"short_answer")})}),"LONG"===e.data.answerType&&Object(m.jsx)(a.Fragment,{children:Object(m.jsx)(w.a,{className:"mb-3",children:Object(m.jsx)(y.a,{as:"textarea",rows:5,placeholder:"Write your answer here","aria-label":"Order in session","aria-describedby":"order",type:"text",value:u,onChange:j},"long_answer")})})]}),Object(m.jsxs)(q.a.Footer,{children:[Object(m.jsx)(C.a,{variant:"secondary",onClick:f,children:"Close"}),!e.readOnly&&Object(m.jsx)(C.a,{variant:"primary",type:"submit",children:"Save"})]})]})})},ue=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(null),l=Object(r.a)(i,2),u=(l[0],l[1],function(){return s(!1)}),j=function(){return void 0!==e.answer&&(void 0!==e.answer.answer&&null!==e.answer.answer||void 0!==e.answer.answerNumber&&null!==e.answer.answerNumber)};return Object(m.jsxs)(a.Fragment,{children:[Object(m.jsxs)(b.a,{style:{width:"16rem"},className:"me-3 mb-3",children:[Object(m.jsx)(b.a.Title,{children:e.data.question}),Object(m.jsxs)(b.a.Body,{children:[Object(m.jsx)(re.a,{children:"STARTED"===e.data.quizState?"Opened":"Closed"}),Object(m.jsx)(re.a,{children:j()?"Answered":"Not Answered"})]}),Object(m.jsxs)(b.a.Footer,{children:["STARTED"===e.data.quizState&&Object(m.jsx)(C.a,{variant:"primary",onClick:function(){return s(!0)},className:"ms-3 mt-3",children:j()?"Edit Answer":"Answer"}),"CLOSED"===e.data.quizState&&Object(m.jsx)(C.a,{variant:"primary",disabled:!j(),onClick:function(){return s(!0)},className:"ms-3 mt-3",children:"View Answer"})]})]}),Object(m.jsx)(q.a,{show:c,children:Object(m.jsx)(le,{data:e.data,answer:e.answer,readOnly:"CLOSED"===e.data.quizState,handleClose:u,handleModalChanges:function(){s(!0)},saveAnswer:function(t){o("/api/web/v1.0/non_auth/give_answer",Object(f.a)(Object(f.a)({},t),{},{guestId:e.answerId}),(function(t){console.log(t),u(),e.messageOrganizer(),e.reloadQuizzes()}),(function(e){console.log(e)}))}})})]})},je=function(){var e=Object(a.useState)(null),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(r.a)(s,2),o=i[0],l=i[1],b=Object(a.useState)(null),O=Object(r.a)(b,2),f=O[0],p=O[1],x=Object(a.useState)(null),g=Object(r.a)(x,2),v=g[0],S=g[1],w=Object(h.h)().id,y=function(){console.log("Get Quizzes AnswerId: ".concat(w)),"iframe.html"!==w&&u("/api/web/v1.0/non_auth/quiz/session/".concat(w),(function(e){l(e.entities),null!==f&&(console.log("client: ".concat(f)),console.log("/topic/insession/".concat(n.sessionId)),N())}),(function(e){console.log("Failed to get session with ID: ".concat(w," with error ").concat(e))}))};Object(a.useEffect)((function(){console.log("Get Session AnswerId: ".concat(w)),S("/insessionws"),"iframe.html"!==w&&u("/api/web/v1.0/non_auth/answer/".concat(w),(function(e){c(e),console.log(e)}),(function(e){console.log("Failed to get session with ID: ".concat(w," with error ").concat(e))}))}),[w]),Object(a.useEffect)((function(){null!==f&&(console.log("client: ".concat(f)),console.log("/topic/insession/".concat(n.sessionId)),N()),y()}),[n]);var C=function(e){return n.answers.find((function(t){return t.quizId===e}))},N=function(){f.sendMessage("/queue/insession/".concat(n.sessionId),JSON.stringify({name:"Participant",message:"Joined Session - New/updated answer"}))};return Object(m.jsxs)(a.Fragment,{children:[Object(m.jsxs)("h1",{className:"text-center mb-5 mt-3",children:["Participant: ",w]}),Object(m.jsx)(j.a,{children:Object(m.jsx)(d.a,{children:null!==o&&o.length>0&&null!==n&&o.map((function(e){return Object(m.jsx)(ue,{name:e.properties.question,data:e.properties,quizHref:e.href,reloadQuizzes:y,answer:C(e.properties.id),answerId:w,messageOrganizer:N},e.properties.id)}))})}),null!==n&&null!==v&&Object(m.jsx)(ie.a,{url:"".concat(v),topics:["/topic/insession/".concat(n.sessionId)],onConnect:function(){console.log("connected")},onDisconnect:function(){console.log("Disconnected")},onMessage:function(e){console.log("gotta message"),console.log(e),"Organizer"===e.name&&y()},ref:function(e){return p(e)}})]})},de=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(null),u=Object(r.a)(i,2),j=u[0],d=u[1],b=Object(a.useState)(e.data.quizState),O=Object(r.a)(b,2),h=O[0],f=O[1],p=Object(a.useState)(null),x=Object(r.a)(p,2),g=(x[0],x[1],Object(a.useState)(!1)),v=Object(r.a)(g,2),S=v[0],w=v[1],y=function(){console.log("Data in Quiz Card: ".concat(e.data)),d(e.data),s(!0)},N=function(){s(!1),d(null)},T=function(){var t=new Array(e.data.answerChoices.length).fill(0);return e.answers.forEach((function(e){return t[e.answerNumber]+=1})),e.data.answerChoices.map((function(n,a){var c="danger";return n.choiceRight&&(c="success"),Object(m.jsx)(J.a,{variant:"flush",children:Object(m.jsxs)(J.a.Item,{children:[Object(m.jsxs)("div",{className:"bg-light d-flex justify-content-between",children:[Object(m.jsx)("p",{children:n.choiceAnswer}),Object(m.jsx)("p",{children:t[n.choiceNumber]+" of "+e.answers.length})]}),Object(m.jsx)(te.a,{variant:c,now:t[n.choiceNumber]/e.answers.length*100})]},a)})}))};return Object(m.jsxs)(a.Fragment,{children:[Object(m.jsxs)(J.a,{horizontal:!0,children:[Object(m.jsx)(J.a.Item,{className:"col-4",children:e.data.question}),Object(m.jsx)(J.a.Item,{className:"col-3",children:e.data.answerType}),Object(m.jsx)(J.a.Item,{className:"col-1",children:e.data.order}),Object(m.jsxs)(J.a.Item,{children:["Answers: ",e.answers.length," "]}),Object(m.jsx)(J.a.Item,{className:"col-2",children:Object(m.jsxs)(P.a.Select,{value:h,onChange:function(t){return function(t){var n={quizState:t};o("".concat(e.quizHref,"/updatestatus"),n,(function(n){null!==n&&(console.log("Updated Quiz ".concat(e.data.id," Successfully!! Response: ").concat(n)),f(t),e.sendMessageToParticipants())}),(function(t){null!==t&&console.log("Error Updating Quiz: ".concat(e.data.id," with error ").concat(t," "))}),"PUT")}(t.target.value)},children:[Object(m.jsx)("option",{value:"NOT_STARTED",children:"Not Started"}),Object(m.jsx)("option",{value:"STARTED",children:"Started"}),Object(m.jsx)("option",{value:"CLOSED",children:"Closed"})]})}),"NOT_STARTED"===h&&Object(m.jsx)(J.a.Item,{children:Object(m.jsx)(C.a,{variant:"primary",onClick:y,children:"Edit"})}),"NOT_STARTED"===h&&Object(m.jsx)(J.a.Item,{children:Object(m.jsx)(C.a,{variant:"primary",type:"submit",onClick:function(){return t=e.data.id,console.log("Quiz Self: ".concat(e.quizHref)),void l(e.quizHref,(function(n){console.log("Deleted Quiz ".concat(t," Successfully!! Response: ").concat(n)),e.reloadQuizzes()}),(function(e){console.log("Error Deleting Quiz: ".concat(t," with error ").concat(e," "))}));var t},children:"Remove"})}),"NOT_STARTED"!==h&&Object(m.jsx)(J.a.Item,{children:Object(m.jsx)(C.a,{variant:"primary",type:"submit",onClick:function(){return w((function(e){return!e}))},children:"Answers"})})]}),e.answers.length>0&&S&&(e.data.id,Object(m.jsxs)(a.Fragment,{children:["MULTIPLE_CHOICE"===e.data.answerType&&T(),"MULTIPLE_CHOICE"!==e.data.answerType&&e.answers.map((function(e,t){return Object(m.jsxs)(J.a,{horizontal:!0,children:[Object(m.jsx)(J.a.Item,{className:"col-1 ms-3",children:t+1}),Object(m.jsx)(J.a.Item,{className:"col-11",children:e.answer})]})}))]})),Object(m.jsx)(q.a,{show:c,children:Object(m.jsx)(Z,{data:j,handleClose:N,handleModalChanges:y,updateQuiz:function(t,n){o(e.quizHref,n,(function(t){N(),e.sendMessageToParticipants(),e.reloadQuizzes()}),(function(e){return null!==e?console.log("Error Updating Quiz: ".concat(t," with error ").concat(e," ")):null}),"PUT")}})})]})},be=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=(t[0],t[1],Object(a.useState)(null)),c=Object(r.a)(n,2),s=c[0],i=c[1],l=Object(a.useState)(null),O=Object(r.a)(l,2),f=O[0],p=O[1],x=Object(a.useState)(null),g=Object(r.a)(x,2),v=g[0],S=g[1],w=Object(a.useState)(0),y=Object(r.a)(w,2),N=y[0],T=y[1],E=Object(a.useState)(null),z=Object(r.a)(E,2),A=(z[0],z[1],Object(a.useState)(!1)),L=Object(r.a)(A,2),I=L[0],k=L[1],D=Object(a.useState)(null),R=Object(r.a)(D,2),P=(R[0],R[1]),Q=Object(a.useState)(null),_=Object(r.a)(Q,2),H=_[0],U=_[1],F=Object(a.useState)(null),M=Object(r.a)(F,2),G=M[0],V=M[1],J=Object(a.useState)(null),W=Object(r.a)(J,2),Y=W[0],K=W[1],X=Object(a.useState)(null),$=Object(r.a)(X,2),ee=$[0],te=$[1],ne=Object(h.h)().id;Object(a.useEffect)((function(){te("/insessionws"),u("/api/web/v1.0/auth/sessions/".concat(ne),(function(e){i(e)}),(function(e){null!==e&&(console.log("Failed to get session with ID: ".concat(ne," with error ").concat(e)),P(e))}))}),[ne]),Object(a.useEffect)((function(){null!==s&&(console.log("ws endpoint"),console.log(ee),U(s.properties.name),V(s.properties.guestCode),ae(),ce())}),[s]);var ae=function(){u(B(s.links,"related","Quizzes"),(function(e){if(e){var t=e.entities.map((function(e){return e})).sort((function(e,t){return function(e,t){return e<t?-1:e>t?1:0}(e.properties.order,t.properties.order)}));p(t)}}),(function(e){null!==e&&alert("Failed to retrieve Session from ".concat(B(s.links,"related")," with error ").concat(e))}))},ce=function(){u(B(s.links,"related","Answers"),(function(e){e&&(T(e.properties.total),S(e.entities))}),(function(e){null!==e&&alert("Failed to retrieve Session from ".concat(B(s.links,"related")," with error ").concat(e))}))},se=function(){k(!0)},re=function(){k(!1)},oe=function(e){var t=[];return null!=v&&null!=v[0]&&v.forEach((function(n){return n.properties.answers.forEach((function(n){n.quizId===e&&t.push(n)}))})),t},le=function(){Y.sendMessage("/topic/insession/".concat(ne),JSON.stringify({name:"Organizer",message:"New/Updated Quizz"}))};return Object(m.jsxs)(a.Fragment,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(b.a,{className:"mt-3",children:Object(m.jsxs)(b.a.Title,{children:[H," - Session Code: ",G," - Number of Participants: ",N]})})})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(C.a,{className:"btn btn-success mb-3 mt-3",type:"submit",onClick:se,children:" Add Quiz"})})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(d.a,{children:null!==f&&f.length>0&&f.map((function(e){return Object(m.jsx)(de,{name:e.properties.question,data:e.properties,quizHref:e.href,reloadQuizzes:ae,answers:oe(e.properties.id),sendMessageToParticipants:le},e.properties.id)}))})}),Object(m.jsx)(q.a,{show:I,children:Object(m.jsx)(Z,{handleClose:re,createQuiz:function(e){var t=s.actions.find((function(e){return"Add-Quiz"===e.name})).href;o(t,e,(function(t){console.log("Created Quiz Successfully!! Response: ".concat(t)),re(),"STARTED"===e.status&&le(),ae()}),(function(e){return null!==e?console.log("Error Creating with error ".concat(e," ")):null}))}})}),null!==s&&null!==ee&&Object(m.jsx)(ie.a,{url:"".concat(ee),topics:["/queue/insession/".concat(ne)],onConnect:function(){console.log("connected"),console.log("/queue/insession/".concat(ne))},onDisconnect:function(){console.log("Disconnected")},onMessage:function(e){console.log(e),ce()},ref:function(e){K(e)}})]})};var Oe=function(){return Object(a.useContext)(g),Object(m.jsx)(v,{children:Object(m.jsx)(O.a,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)(A,{}),Object(m.jsxs)(h.d,{children:[Object(m.jsx)(h.b,{path:"/",element:Object(m.jsx)(N,{})}),Object(m.jsx)(h.b,{path:"/register",element:Object(m.jsx)(T,{})}),Object(m.jsx)(h.b,{path:"/login",element:Object(m.jsx)(E,{})}),Object(m.jsx)(h.b,{path:"/logmein",element:Object(m.jsx)(S,{})}),Object(m.jsx)(h.b,{path:"/insession/:id",element:Object(m.jsx)(je,{})}),Object(m.jsx)(h.b,{path:"/sessions",element:Object(m.jsx)(V,{})}),Object(m.jsx)(h.b,{path:"/sessions/:id",element:Object(m.jsx)(X,{})}),Object(m.jsx)(h.b,{path:"/owninsession/:id",element:Object(m.jsx)(be,{})}),Object(m.jsx)(h.b,{path:"/templates",element:Object(m.jsx)(k,{})}),Object(m.jsx)(h.b,{path:"/history",element:Object(m.jsx)(ce,{})})]})]})})})},he=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,164)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};n(151);i.a.createRoot(document.getElementById("root")).render(Object(m.jsx)(Oe,{})),he()},99:function(e,t){e.exports={SessionDTO:function(e,t,n,a,c){this.name=e,this.description=t,this.limitOfParticipants=n,this.geolocation=a,this.templateId=c}}}},[[152,1,2]]]);
//# sourceMappingURL=main.8d136117.chunk.js.map